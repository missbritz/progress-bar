function getJSON(e){var t,n;return t="",null!=(n=new XMLHttpRequest)&&(n.open("GET",e,!1),n.send(null),t=n.responseText),t}function createBars(e,t){var n="",r=0,s=0;for(i=1;i<=e.length;i++)r=e[i-1],s=Math.floor(r/maxProgress*100),n+='<div id="progress-'+i+'" class="progress-bars" data-progress="'+r+'" data-percent="'+s+'"><div class="progress-rate" style="width:'+s+'%;"></div><span>'+s+"%</span></div>";document.getElementById("Allbars").innerHTML=n,createButtons(t),createSelectors(e.length)}function createSelectors(e){var t="";for(i=1;i<=e;i++)t+=1==i?'<option selected="selected"':"<option",t+=' value="progress-'+i+'">Progress Bar '+i+"</option>";document.getElementById("selector").innerHTML=t}function createButtons(e){var t="";for(i=1;i<=e.length;i++)defaultValue=e[i-1],t+='<button type="button" value="'+defaultValue+'">'+defaultValue+"</button>";document.getElementById("buttons").innerHTML=t}function updateProgressBar(e,t){var n,r,s=0,a=0,o=parseInt(maxProgress),d=0;parseInt(document.getElementById(e).getAttribute("data-percent")),n=parseInt(document.getElementById(e).getAttribute("data-progress"))+parseInt(t),(s=Math.floor(n/o*100))<0?(d=0,a=0):s>100?(d=100,a=s,r="overlimit"):(d=s,a=s),document.getElementById(e).setAttribute("data-progress",n),document.getElementById(e).setAttribute("data-percent",a),document.getElementById(e).getElementsByClassName("progress-rate")[0].style.width=d+"%",document.getElementById(e).children[1].innerHTML=a+"%",r?document.getElementById(e).getElementsByClassName("progress-rate")[0].classList.add(r):document.getElementById(e).getElementsByClassName("progress-rate")[0].classList.remove("overlimit")}var jdata=JSON.parse(getJSON("https://pb-api.herokuapp.com/bars"));console.log(jdata);var Allbars=jdata.bars,maxProgress=jdata.limit,buttons=jdata.buttons;document.getElementById("buttons").addEventListener("click",function(e){if("BUTTON"==e.target.tagName){var t=document.getElementById("selector"),n=e.target.value;updateProgressBar(t.options[t.selectedIndex].value,n)}}),document.querySelector("select").addEventListener("change",function(e){console.log(document.getElementById("selector").options);var t=document.getElementById("selector");t.options[t.options.selectedIndex].selected=!0}),window.onload=function(){createBars(jdata.bars,jdata.buttons)};